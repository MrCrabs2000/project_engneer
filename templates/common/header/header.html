<header>
  <div class="header-container">
    <div class="header-left">
      <a class="logo-a" href="/"><img class="logo" src="/static/images/logo.png"></a>

      {% if current_user_role == 'Student' or current_user_role == 'Teacher' %}
      <div class="balance">
        <span>Баланс: {{userbalance}}<img class="balance-ico" src="/static/images/coin.png"></span>
      </div>
      {% else %}
      <span class="logo-text">Прото<span style="color: hsl(15, 85%, 70%);">Бонус</span></span>
      {% endif %}
    </div>

    <nav class="menu">

      {% if current_user_role == 'Student' %}
        <button data-target="/">Магазин</button>
        <button data-target="/purchases">Покупки</button>
      {% elif current_user_role == 'Admin'%}
        <button data-target="/users">Пользователи</button>
        <button data-target="/items">Предметы</button>
        <button data-target="/items_users">Купленное</button>
      {% elif current_user_role == 'Teacher'%}
        <button data-target="/classes">Классы</button>
      {% endif %}

      {% if not is_not_authenticated %}
        <button class="profile-btn" data-target="/profile">Профиль</button>
      {% else %}
        <button class="profile-btn" data-target="/login">Вход</button>
      {% endif %}
    </nav>
    
  </div>
  {% include 'common/header/profile_popup.html' %}
</header>
<script>
  
  document.addEventListener("DOMContentLoaded", function() {
  const navButtons = document.querySelectorAll(".menu button");

    navButtons.forEach(button => {
      if (button.classList.contains('profile-btn')) {
        button.addEventListener('click', function() {
          popupToggle();
        });
      }
      else {
        button.addEventListener('click', function() {
            window.location.href = this.dataset.target;
        });
      }
    });

    navButtons.forEach(button => {
      const currentPath = window.location.pathname;

      if (button.dataset.target == '/classes' && currentPath.includes(button.dataset.target)) {
        button.classList.add('active');
      }
      else if (button.dataset.target == currentPath) {
        button.classList.add('active');
      }
    });

  });

</script>